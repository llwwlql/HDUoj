<html><head><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="Content-Language" content="en-US"><title>3116 -- MegaCheckers</title><link rel=stylesheet href='poj.css' type='text/css'><link rel='shortcut icon' href='poj.ico'><link rel='icon' href='poj.gif' type='image/gif'><script src='poj.js' language='javascript'></script></head><body lang="en-US" leftmargin=5 link=blue alink=blue vlink=blue onkeydown=KeyDown(event)><a name=top></a><TABLE style='BORDER-COLLAPSE: collapse' borderColor=#ffffff width=100% border=1><TBODY><TR><TD align=CENTER colSpan=5><table class=h1 cellpadding=0><tr><td width=25% align=left><img src='images/logo1.jpg' height=100 border=0></td><td colspan=3 bgcolor='#EAEFFD'><table class=h2><tr><td><img border=0 src='images/logo0.gif' width=450 height=90></td><td width=95><img border=0 src='images/logo3.gif' width=95 height=95></td></tr></table></td></tr></table></TD></TR><TR vAlign=top align=CENTER bgColor=#6589d1><TH class=h>Online Judge</TH><TH class=h>Problem Set</TH><TH class=h>Authors</TH><TH class=h>Online Contests</TH><TH class=h>User</TH></TR><TR vAlign=top align=CENTER bgColor='#f1f1fd'><TD class='h' onMouseOver='scbg(this, 1)' onMouseOut='scbg(this, 0)'><A href='bbs'>Web Board</A><BR><A href='./'>Home Page</A><BR><A href='page?id=1000' target=_blank>F.A.Qs</A><BR><a href='chart'>Statistical Charts</a></TD><TD class='h' onMouseOver='scbg(this, 1)' onMouseOut='scbg(this, 0)'><FORM action=gotoproblem method=get><A href='problemlist'>Problems</A><BR><A href='submit'>Submit Problem</A><BR><A href='status'>Online Status</A><BR><font color=blue>Prob.ID:</font><input type=text name=pid size=6><input type=Submit value=Go name=pb1></form></td><TD class='h' onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><form method=GET action=searchuser><a href=register>Register</a><br><a href=modifyuser>Update your info</a><br><a href=userlist>Authors ranklist</a><br><input type=text name=key size=10><input type=Submit value=Search name=B1></form></TD>
<TD class=h onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><font color=#1a5cc8>Current Contest</font><br><a href=pastcontests>Past Contests</a><br><a href=contests>Scheduled Contests</a><br><a href=challenge.html target=_blank><font color=red>Award Contest</font></a></td><TD align=left class=h onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><form method=POST action=login><table><tr><td>User ID:</td><td><input type=text name=user_id1 size=10 style='font-family:monospace'></td></tr><tr><td>Password:</td><td><input type=password name=password1 size=10 style='font-family:monospace'></td></tr></table><input type=Submit value=login name=B1>&nbsp;&nbsp;<a href=register target=_parent>Register</a><input type=hidden name=url value=/problem?id=3116></form></td></TR></TABLE><table border=0 width=100% background=images/table_back.jpg><tr><td>
<div style='position: absolute; right: 10px;'>Language:<select size=1 onChange="window.location.href='problem?id=3116&lang='+this.value+'&change=true'"><option value='default' selected>Default</option></select></div><div class="ptt" lang="en-US">MegaCheckers</div>
<div class="plm"><table align="center"><tr><td><b>Time Limit:</b> 1000MS</td><td width="10px"></td><td><b>Memory Limit:</b> 65536K</td></tr><tr><td><b>Total Submissions:</b> 141</td><td width="10px"></td><td><b>Accepted:</b> 40</td></table></div><p class="pst">Description</p><div class="ptx" lang="en-US"><span lang="en-us"><p>MegaCheckers is a board game for two players, very similar to the known game of Checkers. The board is rectangular, with <i>N</i> rows and <i>M</i> columns of small squares arranged in an <i>N</i> &times; <i>M</i> grid. The small squares are alternatingly colored with a light color and a dark color, in the usual standard of a checkers board. The squares of dark color are calls &ldquo;homes&rdquo; (note however that, for visualization reasons, the figures below show homes as white squares).</p><p>At the beginning of the game, each player has a certain number of pieces, placed in homes closest to the edge of the board the player chooses (the players choose opposite edges). During the game, the pieces can only occupy the homes of the board.</p><p>One of the moves of the game is to &ldquo;capture&rdquo; an opponent&rsquo;s piece, jumping over it, diagonally, to an adjacent home beyond the piece, which should be empty. The opponent&rsquo;s piece is then removed from the board. The three homes involved in the capture (the initial home of your piece, the home that holds the opponent&rsquo;s piece and the empty home, where your piece will be after the play) must be diagonally aligned and diagonally adjacent, as in the figure below.</p><div align="center"><table border="0" cellpadding="0" cellspacing="0" width="500" height="300"><tr><td align="center" width="50%" valign="middle"><img src="images/3116_1.gif"></td><td align="center" width="50%" valign="middle"><img src="images/3116_2.gif"></td></tr><tr><td align="center" width="50%">Simple capture</td><td align="center" width="50%">Multiple capture</td></tr></table></div><p>In MegaCheckers a piece can capture the opponent&rsquo;s pieces jumping diagonally forward or backward (note that, in the majority of existent variants of the game of checkers, a piece can only capture opponent pieces jumping forward). You can also trigger a multiple capture, with just one piece, jumping successively to empty homes over opponent pieces. In a multiple capture, your piece can change direction, jumping in one direction and later in another one. You can capture only one piece each jump, but can capture several pieces with successive jumps. You can&rsquo;t jump over a piece of yours, or jump over the same opponent piece more than once.</p><p>The dimensions of the board and a description of the current state of a game are given. It&rsquo;s your turn to play and you should determine of maximum number of your opponent&rsquo;s pieces that can be captured in one capture move.</p></span></div><p class="pst">Input</p><div class="ptx" lang="en-US"><span lang="en-us"><p>The input contains several test cases. The first line of a test case contains two integers <i>N</i> and <i>M</i> indicating respectively the number of rows and the number of columns of the board (3 &le; <i>N</i> &le; 20, 3 &le; <i>M</i> &le; 20 and <i>N</i> &times; <i>M</i> &le; 200). The leftmost square of the board at the edge closest to the player is a home. The second line contains the description of the state of the game. Each description consists of <i>ceiling</i>((<i>N</i> &times; <i>M</i>) &frasl; 2) integers, separated by a space, corresponding to the homes of the board, which are numbered from 1 to <i>ceiling</i>((<i>N</i> &times; <i>M</i>) &frasl; 2), from left to right, from the edge closest to the player to the edge closest to his opponent. In the description of the state of the game, &lsquo;<code>1</code>&rsquo; represents a home with a piece of yours, and &lsquo;<code>2</code>&rsquo; represents a home with a piece of your opponent&rsquo;s. There are at most <i>floor</i>((<i>N</i> &times; <i>M</i>) &frasl; 4) pieces of each player on the board. The end of the input is indicated by <i>N</i> = <i>M</i> = 0.</p><div align="center"><table border="0" cellpadding="0" cellspacing="0" width="500" height="300"><tr><td align="center" valign="middle" width="50%"><img src="images/3116_3.png"></td><td align="center" valign="middle" width="50%"><img src="images/3116_4.gif"></td></tr><tr><td align="center" width="50%">(a)</td><td align="center" width="50%">(b)</td></tr></table></div><p align="center">Figure 1: Numeration of homes on (a) board of dimensions 8 &times; 8 and on (b) board of dimensions 5 &times; 3.</p></span></div><p class="pst">Output</p><div class="ptx" lang="en-US"><span lang="en-us"><p>For each test case, your program should produce one line of output, containing an integer indicating the largest number of pieces of your opponent&rsquo;s that can be captured in one move.</p></span></div><p class="pst">Sample Input</p><pre class="sio">3 3
2 1 2 0 1
5 3
1 0 2 1 0 2 0 0
8 8
2 2 2 2 0 0 0 0 2 2 2 2 0 0 0 0 2 2 2 2 0 0 0 0 2 2 2 2 0 1 0 0
0 0</pre><p class="pst">Sample Output</p><pre class="sio">1
2
7</pre><p class="pst">Source</p><div class="ptx" lang="en-US"><a href="searchproblem?field=source&key=South+America+2006">South America 2006</a>, Brazil Subregion</div></td></tr></table>
<font color=#333399 size=3><p align="center">
[<a href="submit?problem_id=3116">Submit</a>]&nbsp;&nbsp;
 [<a href="javascript:history.go(-1)">Go Back</a>]&nbsp;&nbsp; [<a href=problemstatus?problem_id=3116>Status</a>]&nbsp;&nbsp; 
[<a href="bbs?problem_id=3116">Discuss</a>]
</font></p>
<p><img height=30 src=images/home.gif width=40 border=0><font size=3><a href=.>Home Page</a> </font>&nbsp;&nbsp;<img height=30 src='images/goback.gif' width=40 border=0><font size=3><a href='javascript:history.go(-1)'>Go Back</a>&nbsp;&nbsp;<img height=30 width=40 border=0 src='images/top.gif'><a href=#top>To top</a></font><br><hr><P align=center style='font-family:Arial, Helvetica, sans-serif'>All Rights Reserved 2003-2013 Ying Fuchen,Xu Pengcheng,Xie Di<br>Any problem, Please <a href=mailto:webmaster@poj.org>Contact Administrator</a></p><script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-790353-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script></body></html>
