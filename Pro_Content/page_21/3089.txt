<html><head><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="Content-Language" content="en-US"><title>3089 -- Sign Message Formatting</title><link rel=stylesheet href='poj.css' type='text/css'><link rel='shortcut icon' href='poj.ico'><link rel='icon' href='poj.gif' type='image/gif'><script src='poj.js' language='javascript'></script></head><body lang="en-US" leftmargin=5 link=blue alink=blue vlink=blue onkeydown=KeyDown(event)><a name=top></a><TABLE style='BORDER-COLLAPSE: collapse' borderColor=#ffffff width=100% border=1><TBODY><TR><TD align=CENTER colSpan=5><table class=h1 cellpadding=0><tr><td width=25% align=left><img src='images/logo1.jpg' height=100 border=0></td><td colspan=3 bgcolor='#EAEFFD'><table class=h2><tr><td><img border=0 src='images/logo0.gif' width=450 height=90></td><td width=95><img border=0 src='images/logo3.gif' width=95 height=95></td></tr></table></td></tr></table></TD></TR><TR vAlign=top align=CENTER bgColor=#6589d1><TH class=h>Online Judge</TH><TH class=h>Problem Set</TH><TH class=h>Authors</TH><TH class=h>Online Contests</TH><TH class=h>User</TH></TR><TR vAlign=top align=CENTER bgColor='#f1f1fd'><TD class='h' onMouseOver='scbg(this, 1)' onMouseOut='scbg(this, 0)'><A href='bbs'>Web Board</A><BR><A href='./'>Home Page</A><BR><A href='page?id=1000' target=_blank>F.A.Qs</A><BR><a href='chart'>Statistical Charts</a></TD><TD class='h' onMouseOver='scbg(this, 1)' onMouseOut='scbg(this, 0)'><FORM action=gotoproblem method=get><A href='problemlist'>Problems</A><BR><A href='submit'>Submit Problem</A><BR><A href='status'>Online Status</A><BR><font color=blue>Prob.ID:</font><input type=text name=pid size=6><input type=Submit value=Go name=pb1></form></td><TD class='h' onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><form method=GET action=searchuser><a href=register>Register</a><br><a href=modifyuser>Update your info</a><br><a href=userlist>Authors ranklist</a><br><input type=text name=key size=10><input type=Submit value=Search name=B1></form></TD>
<TD class=h onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><font color=#1a5cc8>Current Contest</font><br><a href=pastcontests>Past Contests</a><br><a href=contests>Scheduled Contests</a><br><a href=challenge.html target=_blank><font color=red>Award Contest</font></a></td><TD align=left class=h onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><form method=POST action=login><table><tr><td>User ID:</td><td><input type=text name=user_id1 size=10 style='font-family:monospace'></td></tr><tr><td>Password:</td><td><input type=password name=password1 size=10 style='font-family:monospace'></td></tr></table><input type=Submit value=login name=B1>&nbsp;&nbsp;<a href=register target=_parent>Register</a><input type=hidden name=url value=/problem?id=3089></form></td></TR></TABLE><table border=0 width=100% background=images/table_back.jpg><tr><td>
<div style='position: absolute; right: 10px;'>Language:<select size=1 onChange="window.location.href='problem?id=3089&lang='+this.value+'&change=true'"><option value='default' selected>Default</option></select></div><div class="ptt" lang="en-US">Sign Message Formatting</div>
<div class="plm"><table align="center"><tr><td><b>Time Limit:</b> 1000MS</td><td width="10px"></td><td><b>Memory Limit:</b> 65536K</td></tr><tr><td><b>Total Submissions:</b> 76</td><td width="10px"></td><td><b>Accepted:</b> 20</td></table></div><p class="pst">Description</p><div class="ptx" lang="en-US"><span lang="en-us"><p>The <i>National Transportation Communications for ITS Protocol</i> (NTCIP) for communicating with highway signs with dynamic messages describes the messages using <i>Markup Language for Transportation Information</i> (MULTI). A MULTI string consists of text to be displayed together with embedded tags which describe formatting of the text and included dynamic elements. Tags begin with the open bracket (&lsquo;[&rsquo;) character and end with the close bracket (&lsquo;]&rsquo;) character. If an open bracket character is to appear in the text, it is represented as two open bracket characters. Similarly, if a close bracket character is to appear in the text, it is represented as two close bracket characters. This problem is concerned with formatting for character cell displays, which are rectangular arrays of character cells each of which can display a single character.</p><p>The tags to be supported for this problem are:</p><table border="1" style="border-collapse: collapse" bordercolor="#000000" cellpadding="2"><tr><td><b>Tag</b></td><td><b>Description</b></td></tr><tr><td valign="top"><b><code>[nl]</code></b></td><td>Start a new row of the array</td></tr><tr><td valign="top"><b><code>[sc&lt;<i>digit</i>&gt;]</code></b></td><td>Insert <b><code>&lt;<i>digit</i>&gt;</code></b> blank character cells between each pair of text characters in the following string until changed.</td></tr><tr><td valign="top"><b><code>[/sc]</code></b></td><td>Set inter-character spacing to zero (equivalent to <b><code>[sc0]</code></b>).</td></tr><tr><td valign="top"><b><code>[jl2]</code></b></td><td>Set left justified text (the first character of the text is the leftmost character of the line).</td></tr><tr><td valign="top"><b><code>[jl3]</code></b></td><td>Set center justified text (the number of character positions before and after the text on the line is the same or the number after is one more than the number before).</td></tr><tr><td valign="top"><b><code>[jl4]</code></b></td><td>Set right justified text (the final character of the string is the rightmost character on the line).</td></tr><tr><td valign="top"><b><code>[jl5]</code></b></td><td>Set fully justified text (an equal number of blank character spaces, as large as possible for the line length, is placed between each pair of characters in the text; the resulting string is centered in the line as for centered text).</td></tr></table><p>For example, on a 24 character line:</p><table border="1" style="border-collapse: collapse" bordercolor="#000000" cellpadding="2"><tr><td><b>Format String</b></td><td><b>Generated Output</b></td></tr><tr><td><b><code>[jl2]MESSAGE</code></b></td><td><code>MESSAGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code></td></tr><tr><td><b><code>[jl3]MESSAGE</code></b></td><td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code></td></tr><tr><td><b><code>[jl4]MESSAGE</code></b></td><td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span lang="en-us">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></code><span lang="en-us"><code>&nbsp;</code></span><code>MESSAGE</code></td></tr><tr><td><b><code>[jl2][sc2]MESSAGE</code></b></td><td><code>M&nbsp;&nbsp;E&nbsp;&nbsp;S&nbsp;&nbsp;S&nbsp;&nbsp;A&nbsp;&nbsp;G&nbsp;&nbsp;E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code></td></tr><tr><td><b><code>[jl5]MESSAGE</code></b></td><td><code>&nbsp;&nbsp;M&nbsp;&nbsp;E&nbsp;&nbsp;S&nbsp;&nbsp;S&nbsp;&nbsp;A&nbsp;&nbsp;G&nbsp;&nbsp;E&nbsp;&nbsp;&nbsp;</code></td></tr><tr><td><b><code>[jl2]THIS[jl3]IS A[jl4]MESSAGE</code></b></td><td><code>THIS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IS A&nbsp;&nbsp;&nbsp;MESSAGE</code></td></tr></table><p>Letters within tags are case-insensitive. That is <code>[nl] = [NL] = [Nl] = [nL]</code>.</p><p>The default justification at the beginning of a message is left justification and the default character spacing is 0.</p><p>Justification and character spacing are maintained across <code>[nl]</code> tags.</p><p>The <code>[jl2]</code> and <code>[jl5]</code> tags may only be used before any text has been output on a line. Otherwise it is an error (<b>TAG CONFLICT</b>).</p><p>Once <code>[jl5]</code> text has been output on a line, no other justification tag may be set on that line. Otherwise it is an error (<b>TAG CONFLICT</b>).</p><p>The <code>[jl3]</code> tag may not be used after right justified text (<code>[jl4]</code>) has been output on a line. Otherwise it is an error (<b>TAG CONFLICT</b>).</p><p>A justification tag <code>[jl?]</code> with the same value as the current value does not cause a <b>TAG CONFLICT</b> error.</p><p>Extra character spacing specified by the <code>[sc?]</code> tag is ignored on lines with fully justified text. The full justification rules determine the extra spaces.</p><p>If too many characters are required on a line or too many lines are required in a message, it is an error (<b>TOO BIG</b>). A <code>[nl]</code> tag does not begin a new line unless followed by text output.</p><p>If left justified text and center justified text appear on the same line, there must be at least one blank character cell between the last character of left justified text and the first character of center justified text. Otherwise it is an error (<b>TOO BIG</b>).</p><p>If center justified text and right justified text appear on the same line, there must be at least one blank character cell between the last character of center justified text and the first character of right justified text. Otherwise it is an error (<b>TOO BIG</b>).</p><p>If left justified text and right justified text appear on the same line, there must be at least one blank character cell between the last character of left justified text and the first character of right justified text. Otherwise it is an error (<b>TOO BIG</b>).</p><p>The only tags allowed in a message are the seven tags listed above otherwise it is an error (<b>BAD TAG</b>). A malformed tag or an unmatched single open or closed bracket is a <b>BAD TAG</b> error.</p><p>For this problem you will write a program which takes as input the dimensions of the character cell array and a MULTI string and either outputs an error string or a correctly formatted message.</p></span></div><p class="pst">Input</p><div class="ptx" lang="en-US"><span lang="en-us"><p>The first line of input contains a single integer <i><b>N</b></i> (1 &le; <i><b>N</b></i> &le; 100), which is the number of datasets that follow. Each dataset consists of a single line containing an integer <i><b>R</b></i> (1 &le; <i><b>R</b></i> &le; 25), a blank, an integer <i><b>C</b></i> (1 &le; <i><b>C</b></i> &le; 80), a blank, and the remainder of the line is a <i><b>MULTI-Text</b></i> string. <i><b>R</b></i> is the number of rows in the character cell array, <i><b>C</b></i> is the number of columns in the character cell array, and the <i><b>MULTI-Text</b></i> is the text to be formatted.</p></span></div><p class="pst">Output</p><div class="ptx" lang="en-US"><p>For each dataset, output the dataset number on a line by itself, followed by one of the error strings (<b>TAG CONFLICT</b>, <b>TOO BIG</b>, <b>BAD TAG</b>) on a line by itself in the case of an error, or, <i><b>R</b></i> lines each of which has exactly <i><b>C</b></i> characters (other than terminating newlines) representing the formatted message using space characters for empty character cells. The last line of output for a dataset result should be a single blank line.</p></div><p class="pst">Sample Input</p><pre class="sio">7
4 24 [jl2]MESSAGE[nl][jl3]MESSAGE[nl][jl4]MESSAGE
2 24 This[jl3]is a[jl4]message
2 24 This is a very long message which will not fit
4 24 This[nl]message[nl]has[nl]too[nl]many[nl]lines
2 32 [jl3]This message has a [[ and a ]]
2 32 This is a bad tag[xy34]
2 32 [jl3]This message [jl5] has a tag conflict.</pre><p class="pst">Sample Output</p><pre class="sio">1
MESSAGE                  
        MESSAGE          
                  MESSAGE
                         
2
This      is a    message
                         

3
TOO BIG

4
TOO BIG

5
   This message has a [ and a ]  
                                 

6
BAD TAG

7
TAG CONFLICT</pre><p class="pst">Hint</p><div class="ptx" lang="en-US"><p><b>Note</b>: For ease in grading, a dataset that contains an error will only contain one type of error.</p><p>Copy the sample output to a text editor to see the exact output format.</p></div><p class="pst">Source</p><div class="ptx" lang="en-US"><a href="searchproblem?field=source&key=Greater+New+York+2006">Greater New York 2006</a></div></td></tr></table>
<font color=#333399 size=3><p align="center">
[<a href="submit?problem_id=3089">Submit</a>]&nbsp;&nbsp;
 [<a href="javascript:history.go(-1)">Go Back</a>]&nbsp;&nbsp; [<a href=problemstatus?problem_id=3089>Status</a>]&nbsp;&nbsp; 
[<a href="bbs?problem_id=3089">Discuss</a>]
</font></p>
<p><img height=30 src=images/home.gif width=40 border=0><font size=3><a href=.>Home Page</a> </font>&nbsp;&nbsp;<img height=30 src='images/goback.gif' width=40 border=0><font size=3><a href='javascript:history.go(-1)'>Go Back</a>&nbsp;&nbsp;<img height=30 width=40 border=0 src='images/top.gif'><a href=#top>To top</a></font><br><hr><P align=center style='font-family:Arial, Helvetica, sans-serif'>All Rights Reserved 2003-2013 Ying Fuchen,Xu Pengcheng,Xie Di<br>Any problem, Please <a href=mailto:webmaster@poj.org>Contact Administrator</a></p><script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-790353-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script></body></html>
