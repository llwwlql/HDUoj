<html><head><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="Content-Language" content="en-US"><title>1030 -- Rating</title><link rel=stylesheet href='poj.css' type='text/css'><link rel='shortcut icon' href='poj.ico'><link rel='icon' href='poj.gif' type='image/gif'><script src='poj.js' language='javascript'></script></head><body lang="en-US" leftmargin=5 link=blue alink=blue vlink=blue onkeydown=KeyDown(event)><a name=top></a><TABLE style='BORDER-COLLAPSE: collapse' borderColor=#ffffff width=100% border=1><TBODY><TR><TD align=CENTER colSpan=5><table class=h1 cellpadding=0><tr><td width=25% align=left><img src='images/logo1.jpg' height=100 border=0></td><td colspan=3 bgcolor='#EAEFFD'><table class=h2><tr><td><img border=0 src='images/logo0.gif' width=450 height=90></td><td width=95><img border=0 src='images/logo3.gif' width=95 height=95></td></tr></table></td></tr></table></TD></TR><TR vAlign=top align=CENTER bgColor=#6589d1><TH class=h>Online Judge</TH><TH class=h>Problem Set</TH><TH class=h>Authors</TH><TH class=h>Online Contests</TH><TH class=h>User</TH></TR><TR vAlign=top align=CENTER bgColor='#f1f1fd'><TD class='h' onMouseOver='scbg(this, 1)' onMouseOut='scbg(this, 0)'><A href='bbs'>Web Board</A><BR><A href='./'>Home Page</A><BR><A href='page?id=1000' target=_blank>F.A.Qs</A><BR><a href='chart'>Statistical Charts</a></TD><TD class='h' onMouseOver='scbg(this, 1)' onMouseOut='scbg(this, 0)'><FORM action=gotoproblem method=get><A href='problemlist'>Problems</A><BR><A href='submit'>Submit Problem</A><BR><A href='status'>Online Status</A><BR><font color=blue>Prob.ID:</font><input type=text name=pid size=6><input type=Submit value=Go name=pb1></form></td><TD class='h' onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><form method=GET action=searchuser><a href=register>Register</a><br><a href=modifyuser>Update your info</a><br><a href=userlist>Authors ranklist</a><br><input type=text name=key size=10><input type=Submit value=Search name=B1></form></TD>
<TD class=h onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><font color=#1a5cc8>Current Contest</font><br><a href=pastcontests>Past Contests</a><br><a href=contests>Scheduled Contests</a><br><a href=challenge.html target=_blank><font color=red>Award Contest</font></a></td><TD align=left class=h onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><form method=POST action=login><table><tr><td>User ID:</td><td><input type=text name=user_id1 size=10 style='font-family:monospace'></td></tr><tr><td>Password:</td><td><input type=password name=password1 size=10 style='font-family:monospace'></td></tr></table><input type=Submit value=login name=B1>&nbsp;&nbsp;<a href=register target=_parent>Register</a><input type=hidden name=url value=/problem?id=1030></form></td></TR></TABLE><table border=0 width=100% background=images/table_back.jpg><tr><td>
<div style='position: absolute; right: 10px;'>Language:<select size=1 onChange="window.location.href='problem?id=1030&lang='+this.value+'&change=true'"><option value='default' selected>Default</option></select></div><div class="ptt" lang="en-US">Rating</div>
<div class="plm"><table align="center"><tr><td><b>Time Limit:</b> 1000MS</td><td width="10px"></td><td><b>Memory Limit:</b> 10000K</td></tr><tr><td><b>Total Submissions:</b> 1781</td><td width="10px"></td><td><b>Accepted:</b> 425</td></table></div><p class="pst">Description</p><div class="ptx" lang="en-US">One of the participants of both regional contests which took place in St. Petersburg decided to determine overall rating for all teams that took part in at least one contest. <br>This participant assigned each team a unique team identifier, which was an integer from 1 to 100 inclusively. For each contest team identifiers of the participating teams were written in a column according to their place in that contest. Identifiers of the teams that had equal results were written on the same line. The participant started with the team(s) that was(were) the best in that contest (writing them on the first line) and continued in the order of decreasing results.  <br>Definition: Let's say that the team has place K in the contest if exactly K-1   teams performed in that contest better.<br>Consider the following examples of two contests' results:<br><table border="1" cellspacing="0" cellpadding="0">  <tr>    <td width="347" colspan="2" valign="top"       <p class="MsoNormal" align="center" style="text-align:center"><span lang="EN-US">Contest       no. 1<o:p>      </o:p>      </span></p>    </td>    <td width="347" colspan="2" valign="top" >      <p class="MsoNormal" align="center" style="text-align:center"><span lang="EN-US">Contest       no. 2<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US" class="Treatasvalue">place<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US" class="Treatasvalue">team's id<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top">      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US" class="Treatasvalue">place<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top">      <p class="MsoNormal"><span lang="EN-US" class="Treatasvalue">team's id<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">1<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top">      <p class="MsoNormal"><span lang="EN-US">9<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">1<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">3<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">2<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">7 1 4<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">2<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">5<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">5<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">5<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">3<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">1 10<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">6<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">15 8<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">5<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">6<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">8<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">31 18<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">6<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">9<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">10<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">17<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">7<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">19<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"> <span lang="EN-US"><o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"> <span lang="EN-US"><o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US">8<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="MsoNormal"><span lang="EN-US">4 20<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="174" valign="top" >      <p class="Problemtext"> <span lang="EN-US"><o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="Problemtext"> <span lang="EN-US"><o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="Problemtext" align="right" style="text-align:right"><span lang="EN-US">10<o:p>      </o:p>      </span></p>    </td>    <td width="174" valign="top" >      <p class="Problemtext"><span lang="EN-US">21<o:p>      </o:p>      </span></p>    </td>  </tr></table><br>The overall rating for the teams which took part in both contests is defined in the following way:<br>1)	If some team performed better in both contests than some other team (or better in one contest and with the same result in the other contest) then the overall rating of the former team is higher than the rating of the latter team.<br>2)	If one of the teams in question performed better in one contest and the other team performed better in another contest then their overall rating depends on the difference of their places in both contests. So, in our example team 1 is better than team 5 in the first contest with a difference of 3 places and worse in the second contest with a difference of only 1 place, therefore the overall rating of team 1 is higher than team 5's one. If the difference of the places is the same for both contests then that teams have the equal overall ratings. The latter is also true for the teams that performed equally in both contests.<br>In our example only teams 1, 4, 5, and 9 participated twice. Team 1 has the highest rating, teams 5 and 9 with the equal rating follow, and team 4 has the lowest rating.<br>For the teams that participated in one contest only the overall rating and their position in the resulting list cannot be always determined. They are included in the overall list (where the teams which participated twice already placed according to the rules above) if one of the following takes place:<br>A)	If there is a team that participated in both contests and shared the place in one of the contests with the team in question then the latter team shares the overall rating with this team too (if there is more than one such team, then they all should have the same overall rating, otherwise the overall rating of the team in question cannot be determined).<br>B)	If there is a position in the overall list (either at the beginning of the list, at the end of the list, or between some lines), such that before this position only the teams are located which performed better in the same contest as the team in question and after this position only the teams are located which performed worse in the same contest as the team in question, then the team in question occupies this position in the overall list. If more than one team claim to have the same position in the overall list, then their mutual order is defined by their places in their contests (look at the example below for details).<br><table border="1" cellspacing="0" cellpadding="0">  <tr>    <td width="347" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right;page-break-after:avoid"><span lang="EN-US">Teams       that participated in both contests<o:p>      </o:p>      </span></p>    </td>    <td width="347" valign="top" >      <p class="MsoNormal" style="page-break-after:avoid"><span lang="EN-US">Teams       that participated in one contest only<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="347" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right;page-break-after:avoid"> <span lang="EN-US"><o:p>      </o:p>      </span></p>    </td>    <td width="347" valign="top" >      <p class="MsoNormal" style="page-break-after:avoid"><span lang="EN-US">3<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="347" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right;page-break-after:avoid"><span lang="EN-US">1<o:p>      </o:p>      </span></p>    </td>    <td width="347" valign="top" >      <p class="MsoNormal" style="page-break-after:avoid"><span lang="EN-US">10<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="347" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right;page-break-after:avoid"><span lang="EN-US">9       5<o:p>      </o:p>      </span></p>    </td>    <td width="347" valign="top" >      <p class="MsoNormal" style="page-break-after:avoid"> <span lang="EN-US"><o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="347" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right;page-break-after:avoid"> <span lang="EN-US"><o:p>      </o:p>      </span></p>    </td>    <td width="347" valign="top" >      <p class="MsoNormal" style="page-break-after:avoid"><span lang="EN-US">19<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="347" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right;page-break-after:avoid"><span lang="EN-US">4<o:p>      </o:p>      </span></p>    </td>    <td width="347" valign="top" >      <p class="MsoNormal" style="page-break-after:avoid"><span lang="EN-US">20<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="347" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right;page-break-after:avoid"> <span lang="EN-US"><o:p>      </o:p>      </span></p>    </td>    <td width="347" valign="top" >      <p class="MsoNormal" style="page-break-after:avoid"><span lang="EN-US">15       8<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="347" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right;page-break-after:avoid"> <span lang="EN-US"><o:p>      </o:p>      </span></p>    </td>    <td width="347" valign="top" >      <p class="MsoNormal" style="page-break-after:avoid"><span lang="EN-US">31       18<o:p>      </o:p>      </span></p>    </td>  </tr>  <tr>    <td width="347" valign="top" >      <p class="MsoNormal" align="right" style="text-align:right"> <span lang="EN-US"><o:p>      </o:p>      </span></p>    </td>    <td width="347" valign="top" >      <p class="MsoNormal"><span lang="EN-US">17 21<o:p>      </o:p>      </span></p>    </td>  </tr></table><br>?Team 3 will occupy the first place in the overall list (rule B).<br>?The positions of teams 6 and 7 cannot be determined.<br>?Team 10 will share the overall rating with team 1 (rule A).<br>?Team 20 will share the overall rating with team 4 (rule A).<br>?Team 19 will occupy the position between teams 9, 5 and team 4 (rule B).<br>?Teams 8, 15, 17, 18, 21, and 31 will finish the overall list (rule B). But the first of them will be teams 15 and 8 (that took 6th place) followed by teams 31 and 18 (that took 8th place) and teams 17 and 21 (that took 10th place).<br>Your task is to write a program that will create the overall rating list using the result tables of two contests and the given rules.<br></div><p class="pst">Input</p><div class="ptx" lang="en-US">The input file contains a description of the two contests, which are separated by an empty line. Each description starts with a line containing the single integer N (1 <= N <= 100) that indicates how many lines of the contest result table follow. Each line of the contest result table consists of one or more team identifiers separated by spaces.<br>Every team identifier occurs at most once in the description of each contest.<br></div><p class="pst">Output</p><div class="ptx" lang="en-US">Write to the output file one or more lines with the team identifiers (separated by spaces) that represent the overall rating list. The teams that share the same rating (thus written on the same line) is written in ascending order. The teams for which the overall rating is not determined should be absent in the output file.</div><p class="pst">Sample Input</p><pre class="sio">6
9
7 1 4
5
15 8
31 18
17

8
3
5
1 10
6
9
19
4 20
21
</pre><p class="pst">Sample Output</p><pre class="sio">3
1 10
5 9
19
4 20
8 15
18 31
17 21</pre><p class="pst">Source</p><div class="ptx" lang="en-US"><a href="searchproblem?field=source&key=Northeastern+Europe+1998">Northeastern Europe 1998</a></div></td></tr></table>
<font color=#333399 size=3><p align="center">
[<a href="submit?problem_id=1030">Submit</a>]&nbsp;&nbsp;
 [<a href="javascript:history.go(-1)">Go Back</a>]&nbsp;&nbsp; [<a href=problemstatus?problem_id=1030>Status</a>]&nbsp;&nbsp; 
[<a href="bbs?problem_id=1030">Discuss</a>]
</font></p>
<p><img height=30 src=images/home.gif width=40 border=0><font size=3><a href=.>Home Page</a> </font>&nbsp;&nbsp;<img height=30 src='images/goback.gif' width=40 border=0><font size=3><a href='javascript:history.go(-1)'>Go Back</a>&nbsp;&nbsp;<img height=30 width=40 border=0 src='images/top.gif'><a href=#top>To top</a></font><br><hr><P align=center style='font-family:Arial, Helvetica, sans-serif'>All Rights Reserved 2003-2013 Ying Fuchen,Xu Pengcheng,Xie Di<br>Any problem, Please <a href=mailto:webmaster@poj.org>Contact Administrator</a></p><script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-790353-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script></body></html>
