<html><head><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="Content-Language" content="en-US"><title>3769 -- Baseball on the Mercury</title><link rel=stylesheet href='poj.css' type='text/css'><link rel='shortcut icon' href='poj.ico'><link rel='icon' href='poj.gif' type='image/gif'><script src='poj.js' language='javascript'></script></head><body lang="en-US" leftmargin=5 link=blue alink=blue vlink=blue onkeydown=KeyDown(event)><a name=top></a><TABLE style='BORDER-COLLAPSE: collapse' borderColor=#ffffff width=100% border=1><TBODY><TR><TD align=CENTER colSpan=5><table class=h1 cellpadding=0><tr><td width=25% align=left><img src='images/logo1.jpg' height=100 border=0></td><td colspan=3 bgcolor='#EAEFFD'><table class=h2><tr><td><img border=0 src='images/logo0.gif' width=450 height=90></td><td width=95><img border=0 src='images/logo3.gif' width=95 height=95></td></tr></table></td></tr></table></TD></TR><TR vAlign=top align=CENTER bgColor=#6589d1><TH class=h>Online Judge</TH><TH class=h>Problem Set</TH><TH class=h>Authors</TH><TH class=h>Online Contests</TH><TH class=h>User</TH></TR><TR vAlign=top align=CENTER bgColor='#f1f1fd'><TD class='h' onMouseOver='scbg(this, 1)' onMouseOut='scbg(this, 0)'><A href='bbs'>Web Board</A><BR><A href='./'>Home Page</A><BR><A href='page?id=1000' target=_blank>F.A.Qs</A><BR><a href='chart'>Statistical Charts</a></TD><TD class='h' onMouseOver='scbg(this, 1)' onMouseOut='scbg(this, 0)'><FORM action=gotoproblem method=get><A href='problemlist'>Problems</A><BR><A href='submit'>Submit Problem</A><BR><A href='status'>Online Status</A><BR><font color=blue>Prob.ID:</font><input type=text name=pid size=6><input type=Submit value=Go name=pb1></form></td><TD class='h' onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><form method=GET action=searchuser><a href=register>Register</a><br><a href=modifyuser>Update your info</a><br><a href=userlist>Authors ranklist</a><br><input type=text name=key size=10><input type=Submit value=Search name=B1></form></TD>
<TD class=h onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><font color=#1a5cc8>Current Contest</font><br><a href=pastcontests>Past Contests</a><br><a href=contests>Scheduled Contests</a><br><a href=challenge.html target=_blank><font color=red>Award Contest</font></a></td><TD align=left class=h onMouseOver='scbg(this,1)' onMouseOut='scbg(this,0)'><form method=POST action=login><table><tr><td>User ID:</td><td><input type=text name=user_id1 size=10 style='font-family:monospace'></td></tr><tr><td>Password:</td><td><input type=password name=password1 size=10 style='font-family:monospace'></td></tr></table><input type=Submit value=login name=B1>&nbsp;&nbsp;<a href=register target=_parent>Register</a><input type=hidden name=url value=/problem?id=3769></form></td></TR></TABLE><table border=0 width=100% background=images/table_back.jpg><tr><td>
<div style='position: absolute; right: 10px;'>Language:<select size=1 onChange="window.location.href='problem?id=3769&lang='+this.value+'&change=true'"><option value='default' selected>Default</option></select></div><div class="ptt" lang="en-US">Baseball on the Mercury</div>
<div class="plm"><table align="center"><tr><td><b>Time Limit:</b> 1000MS</td><td width="10px"></td><td><b>Memory Limit:</b> 65536K</td></tr><tr><td><b>Total Submissions:</b> 132</td><td width="10px"></td><td><b>Accepted:</b> 46</td></table></div><p class="pst">Description</p><div class="ptx" lang="en-US"><div><p>Baseball on the Mercury is similar to that on the Earth. This game is played between two teams: the batting team and the fielding team. There are four bases: home base, first base, second base and third base. They form a square called the baseball diamond. The players in the batting team bat the ball at home base one by one. Each of them bats exactly once.</p><p>The game starts with the first player of the batting team standing at home base, bats the ball. The other players of batting team wait outside. After that, the first player runs from base to base in the order of home base -> first base -> second base -> third base -> home base. He may stop at one of these bases, but he cannot stay still. If he reaches the home base again, he will leave the game and earn 1 point for his team.</p><p>Then the second player bats the ball at home base. After that, both players run in the same order mentioned above (If the first player has already left the game, the second player runs alone). The other players still wait outside. The second player may stop at one of these bases, but he cannot stay still. If one of them reaches the home base again, he will leave the game and earn 1 point for his team. If both of them do so, both leave and 2 points will be earned. And then the third player, the fourth player ... the <i>N</i>th player of batting team bats the ball the same way. Notice that at any time, there should be at most 1 player at first base, at most 1 player at second base and at most 1 player at third base.</p><p>There are two ways of batting, ordinary way and sacrifice way. A player bats the ball in an ordinary way if and only if there was nobody at the third base before he bats. In an ordinary strategy, if the player bats unsuccessfully, he will get an "Out" and leave the game, and all other players must stay still. If the player bats successfully, the batting levels are shown below:</p><ol><li>The player bats bad. All other players who are at the bases <span style="color:red">and the batter</span> can only run to the next base or stay still.</li><li>The player bats good. All other players who are at the bases <span style="color:red">and the batter</span> can run to one of the next 2 bases or stay still.</li><li>The player bats very well. All other players who are at the bases <span style="color:red">and the batter</span> can run to the one of the next 3 bases or stay still.</li><li>The player bats excellent. All other players who are at the bases <span style="color:red">and the batter</span> can run to one of the next 4 bases or stay still.</li></ol><p>A player bats the ball in a sacrifice way if and only if there was somebody at the third base before he bats. In this case, he will get an "Out" after he bats, and he must leave the game. However, if he bats successfully, the other players who are at bases can run to one of the next 2 bases or stay still.</p><p>The score of the batting team is the points they get by returning to the home base minus the number of "Out" they get. Suppose that you are the coach of the batting team and you know your team-members very well -- you know the rate of every batting level and you can decide the strategy when they run from base to base, it means that you can decide which base they will stop at. But you cannot decide the order of players. You are so clever that you will make the expectation score of your team as high as possible. So what's the expectation score?</p></div></div><p class="pst">Input</p><div class="ptx" lang="en-US"><div><p>There are several cases in the input file, end by 0. For each case,<br />The first line is an integer <i>N</i> (<i>N</i><=10000), the number of players in your team.<br />Then followed <i>N</i> lines, each line describes the rates of a batter, in the bat order.<br />For each line, there are 5 real numbers, the rate of “bad bat”, the rate of “good bat”, the rate of “very well bat”, the rate of “excellent bat” and the rate of successful batting in the sacrifice way.<br />The input is always valid.</p></div></div><p class="pst">Output</p><div class="ptx" lang="en-US"><div><p>For each case, the output contains 1 line, the expectation score. The answer should be rounded to 3 digits. </p></div></div><p class="pst">Sample Input</p><pre class="sio">7
0.004 0.769 0.028 0.049 0.885
0.180 0.686 0.031 0.005 0.061
0.585 0.336 0.009 0.002 0.054
0.592 0.365 0.027 0.005 0.468
0.098 0.171 0.121 0.361 0.846
0.132 0.771 0.022 0.073 0.228
0.245 0.045 0.060 0.559 0.691
0
</pre><p class="pst">Sample Output</p><pre class="sio">3.700</pre><p class="pst">Source</p><div class="ptx" lang="en-US"><a href="searchproblem?field=source&key="></a></div></td></tr></table>
<font color=#333399 size=3><p align="center">
[<a href="submit?problem_id=3769">Submit</a>]&nbsp;&nbsp;
 [<a href="javascript:history.go(-1)">Go Back</a>]&nbsp;&nbsp; [<a href=problemstatus?problem_id=3769>Status</a>]&nbsp;&nbsp; 
[<a href="bbs?problem_id=3769">Discuss</a>]
</font></p>
<p><img height=30 src=images/home.gif width=40 border=0><font size=3><a href=.>Home Page</a> </font>&nbsp;&nbsp;<img height=30 src='images/goback.gif' width=40 border=0><font size=3><a href='javascript:history.go(-1)'>Go Back</a>&nbsp;&nbsp;<img height=30 width=40 border=0 src='images/top.gif'><a href=#top>To top</a></font><br><hr><P align=center style='font-family:Arial, Helvetica, sans-serif'>All Rights Reserved 2003-2013 Ying Fuchen,Xu Pengcheng,Xie Di<br>Any problem, Please <a href=mailto:webmaster@poj.org>Contact Administrator</a></p><script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-790353-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script></body></html>
